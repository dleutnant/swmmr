<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Conversion between GIS data and SWMM with swmmr • swmmr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Conversion between GIS data and SWMM with swmmr">
<meta property="og:description" content="swmmr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">swmmr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/How_swmmr_reads_and_writes_files.html">How swmmr reads and writes SWMM files</a>
    </li>
    <li>
      <a href="../articles/How_to_autocalibrate_a_SWMM_model_with_swmmr.html">How to autocalibrate a SWMM model with swmmr</a>
    </li>
    <li>
      <a href="../articles/How_to_convert_between_GIS_data_and_SWMM_with_swmmr.html">Conversion between GIS data and SWMM with swmmr</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dleutnant/swmmr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Conversion between GIS data and SWMM with
swmmr</h1>
                        <h4 data-toc-skip class="author">Anneke
Doering</h4>
            
            <h4 data-toc-skip class="date">2023-01-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/dleutnant/swmmr/blob/HEAD/vignettes/How_to_convert_between_GIS_data_and_SWMM_with_swmmr.Rmd" class="external-link"><code>vignettes/How_to_convert_between_GIS_data_and_SWMM_with_swmmr.Rmd</code></a></small>
      <div class="hidden name"><code>How_to_convert_between_GIS_data_and_SWMM_with_swmmr.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="swmmrs-function-inp_to_files">swmmr’s function inp_to_files<a class="anchor" aria-label="anchor" href="#swmmrs-function-inp_to_files"></a>
</h2>
<p>This function is an addition to the swmmr package. The function
inp_to_files is used to convert SWMM projects saved as .inp to several
independent files. While geographical informations are stored in .shp
files, informations of the sections options, report, raingages,
evaporation, pollutants, landuses, buildup, washoff and coverages are
stored in one .txt file named ‘options.txt’. Furthermore timeseries are
converted to SWMM’s timeseries format and saved in .dat files.</p>
<p>The usage of swmmr’s function inp_to_files is explained with Example1
shipped with the SWMM executable:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First load the following packages:</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dleutnant/swmmr" class="external-link">swmmr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># in case your operating system is Windows, the examples are saved in the following directory:</span></span>
<span><span class="co"># "C:/Users/.../Documents/EPA SWMM Projects/Examples/"</span></span>
<span><span class="co"># please change the path to:</span></span>
<span><span class="co"># "C:/Users/.../Documents/EPA_SWMM_Projects/Examples/"</span></span>
<span><span class="co"># substitute '...' with your user name</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set path to inp</span></span>
<span><span class="co"># If your operating system is Windows, the Example1.inp model is usually </span></span>
<span><span class="co"># located at "C:\Users\your user name\Documents\EPA SWMM Projects\Examples".</span></span>
<span><span class="co"># For convenience the Example1.inp model is also included in the swmmr package.</span></span>
<span><span class="co"># Feel free to change this to your path of choice.</span></span>
<span><span class="va">inp_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Example1.inp"</span>, package <span class="op">=</span> <span class="st">"swmmr"</span>, mustWork <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set the path to the output directory for the example files (here, we use a temp directory)</span></span>
<span><span class="co"># Feel free to change this to your path of choice. </span></span>
<span><span class="va">out_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read the "Example1.inp" using read_inp</span></span>
<span><span class="va">Example1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_inp.html">read_inp</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">inp_file</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># glance the structure of Example1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">Example1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## ** summary of swmm model structure ** </span></span>
<span><span class="co">## infiltration   :     horton </span></span>
<span><span class="co">## flow_units     :        cfs </span></span>
<span><span class="co">## flow_routing   :    kinwave </span></span>
<span><span class="co">## start_date     : 01/01/1998 </span></span>
<span><span class="co">## end_date       : 01/02/1998 </span></span>
<span><span class="co">## raingages      :          1 </span></span>
<span><span class="co">## subcatchments  :          8 </span></span>
<span><span class="co">## aquifers       :          0 </span></span>
<span><span class="co">## snowpacks      :          0 </span></span>
<span><span class="co">## junctions      :         13 </span></span>
<span><span class="co">## outfalls       :          1 </span></span>
<span><span class="co">## dividers       :          0 </span></span>
<span><span class="co">## storage        :          0 </span></span>
<span><span class="co">## conduits       :         13 </span></span>
<span><span class="co">## pumps          :          0 </span></span>
<span><span class="co">## orifices       :          0 </span></span>
<span><span class="co">## weirs          :          0 </span></span>
<span><span class="co">## outlets        :          0 </span></span>
<span><span class="co">## controls       :          0 </span></span>
<span><span class="co">## pollutants     :          2 </span></span>
<span><span class="co">## landuses       :          2 </span></span>
<span><span class="co">## lid_controls   :          0 </span></span>
<span><span class="co">## treatment      :          0 </span></span>
<span><span class="co">## *************************************</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># convert .inp file into independent .shp and .txt files</span></span>
<span><span class="fu"><a href="../reference/inp_to_files.html">inp_to_files</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Example1</span>, name <span class="op">=</span> <span class="st">"Example1"</span>, path_out <span class="op">=</span> <span class="va">out_dir</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in abbreviate_shapefile_names(obj): Field names abbreviated for ESRI</span></span>
<span><span class="co">## Shapefile driver</span></span></code></pre>
<pre><code><span><span class="co">## Writing layer `Example1_polygon' to data source </span></span>
<span><span class="co">##   `/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmpa7u2Up/shp/Example1_polygon.shp' using driver `ESRI Shapefile'</span></span>
<span><span class="co">## Writing 8 features with 22 fields and geometry type Polygon.</span></span>
<span><span class="co">## Writing layer `Example1_link' to data source </span></span>
<span><span class="co">##   `/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmpa7u2Up/shp/Example1_link.shp' using driver `ESRI Shapefile'</span></span>
<span><span class="co">## Writing 13 features with 16 fields and geometry type Line String.</span></span>
<span><span class="co">## Writing layer `Example1_point' to data source </span></span>
<span><span class="co">##   `/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmpa7u2Up/shp/Example1_point.shp' using driver `ESRI Shapefile'</span></span>
<span><span class="co">## Writing 13 features with 6 fields and geometry type Point.</span></span>
<span><span class="co">## Writing layer `Example1_outfall' to data source </span></span>
<span><span class="co">##   `/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmpa7u2Up/shp/Example1_outfall.shp' using driver `ESRI Shapefile'</span></span>
<span><span class="co">## Writing 1 features with 6 fields and geometry type Point.</span></span></code></pre>
<pre><code><span><span class="co">## section weirs is missing</span></span></code></pre>
<pre><code><span><span class="co">## section orifices is missing</span></span></code></pre>
<pre><code><span><span class="co">## section pumps is missing</span></span></code></pre>
<pre><code><span><span class="co">## section storage is missing</span></span></code></pre>
<pre><code><span><span class="co">## *.shp files were written to /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmpa7u2Up/shp</span></span></code></pre>
<pre><code><span><span class="co">## *.txt file was written to /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmpa7u2Up/txt</span></span></code></pre>
<pre><code><span><span class="co">## TRUEsection curves is missing</span></span></code></pre>
<pre><code><span><span class="co">## timeseries.dat files were written to /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmpa7u2Up/dat</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check folders in your output directory:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">out_dir</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "dat"                            "file15f244001fc7"              </span></span>
<span><span class="co">## [3] "file15f2642664b1"               "file15f2694470f3"              </span></span>
<span><span class="co">## [5] "file15f2c539783"                "file15f2ed1b316"               </span></span>
<span><span class="co">## [7] "rmarkdown-str15f243a0fa6b.html" "shp"                           </span></span>
<span><span class="co">## [9] "txt"</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check existence of shape, text and dat files:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"shp"</span>, <span class="st">"txt"</span>, <span class="st">"dat"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>, <span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">list.files</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [[1]]</span></span>
<span><span class="co">##  [1] "Example1_link.dbf"    "Example1_link.shp"    "Example1_link.shx"   </span></span>
<span><span class="co">##  [4] "Example1_outfall.dbf" "Example1_outfall.shp" "Example1_outfall.shx"</span></span>
<span><span class="co">##  [7] "Example1_point.dbf"   "Example1_point.shp"   "Example1_point.shx"  </span></span>
<span><span class="co">## [10] "Example1_polygon.dbf" "Example1_polygon.shp" "Example1_polygon.shx"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## [1] "Example1_options.txt"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[3]]</span></span>
<span><span class="co">## [1] "Example1_timeseries_TS1.dat"</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="swmmrs-function-shp_to_inp">swmmr’s function shp_to_inp<a class="anchor" aria-label="anchor" href="#swmmrs-function-shp_to_inp"></a>
</h2>
<hr>
<p>This is the counterpart to inp_to_files. Geographical informations
stored in .shp files are converted to the input file format ‘.inp’ of
SWMM using R. Informations on simulation settings, rain timeseries etc.,
stored in .txt or .dat files, complete these geographical
informations.</p>
<div class="section level3">
<h3 id="conversion-of-example1-files-to-one-inp-file">Conversion of Example1 files to one inp file<a class="anchor" aria-label="anchor" href="#conversion-of-example1-files-to-one-inp-file"></a>
</h3>
<p>Based on the converted files of Example1, the usage of swmmr’s
function shp_to_inp is explained:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># convert shp and txt files to inp object:</span></span>
<span><span class="va">Example1_con</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/shp_to_inp.html">shp_to_inp</a></span><span class="op">(</span></span>
<span>  path_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>,<span class="st">"txt/Example1_options.txt"</span><span class="op">)</span>,</span>
<span>  path_timeseries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>,<span class="st">"dat/Example1_timeseries_TS1.dat"</span><span class="op">)</span>,</span>
<span>  path_polygon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>,<span class="st">"shp/Example1_polygon.shp"</span><span class="op">)</span>,</span>
<span>  path_line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>,<span class="st">"shp/Example1_link.shp"</span><span class="op">)</span>,</span>
<span>  path_point <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>,<span class="st">"shp/Example1_point.shp"</span><span class="op">)</span>,</span>
<span>  path_outfall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>,<span class="st">"shp/Example1_outfall.shp"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `spread_()` was deprecated in tidyr 1.2.0.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Please use `spread()` instead.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">swmmr</span> package.</span></span>
<span><span class="co">##   Please report the issue at <span style="color: #0000BB; font-style: italic;">&lt;https://github.com/dleutnant/swmmr/issues&gt;</span>.</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># glance the structure of the converted Example1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">Example1_con</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## ** summary of swmm model structure ** </span></span>
<span><span class="co">## infiltration   :     horton </span></span>
<span><span class="co">## flow_units     :        cfs </span></span>
<span><span class="co">## flow_routing   :    kinwave </span></span>
<span><span class="co">## start_date     : 01/01/1998 </span></span>
<span><span class="co">## end_date       : 01/02/1998 </span></span>
<span><span class="co">## raingages      :          1 </span></span>
<span><span class="co">## subcatchments  :          8 </span></span>
<span><span class="co">## aquifers       :          0 </span></span>
<span><span class="co">## snowpacks      :          0 </span></span>
<span><span class="co">## junctions      :         13 </span></span>
<span><span class="co">## outfalls       :          1 </span></span>
<span><span class="co">## dividers       :          0 </span></span>
<span><span class="co">## storage        :          0 </span></span>
<span><span class="co">## conduits       :         13 </span></span>
<span><span class="co">## pumps          :          0 </span></span>
<span><span class="co">## orifices       :          0 </span></span>
<span><span class="co">## weirs          :          0 </span></span>
<span><span class="co">## outlets        :          0 </span></span>
<span><span class="co">## controls       :          0 </span></span>
<span><span class="co">## pollutants     :          2 </span></span>
<span><span class="co">## landuses       :          2 </span></span>
<span><span class="co">## lid_controls   :          0 </span></span>
<span><span class="co">## treatment      :          0 </span></span>
<span><span class="co">## *************************************</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># save the input file to a new folder in the output directory:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>, <span class="st">"inp_new"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/write_inp.html">write_inp</a></span><span class="op">(</span><span class="va">Example1_con</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">out_dir</span>, <span class="st">"inp_new"</span>, <span class="st">"Example1_con.inp"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now simulation runs can be initiated…</p>
</div>
</div>
<div class="section level2">
<h2 id="setup-a-new-swmm-project-using-shp_to_inp">setup a new SWMM project using shp_to_inp<a class="anchor" aria-label="anchor" href="#setup-a-new-swmm-project-using-shp_to_inp"></a>
</h2>
<p>There are three different ways to define the parameters of the
different SWMM sections:</p>
<ol style="list-style-type: decimal">
<li>all parameter values are given in .shp files containing polygon,
point or line features and one .txt file containing informations on
simulation settings</li>
<li>a minimum of information is given in the attribute tables of the shp
files, additional parameters are completed with information given in the
R objects: infiltration, subcatchment_typologies, conduit_material and
junction_parameters</li>
<li>information that is neither given in the input files (.shp or .txt)
or supplementary R objects is internally complemented with default
values</li>
</ol>
<div class="section level3">
<h3 id="supplementary-r-objects">supplementary R objects:<a class="anchor" aria-label="anchor" href="#supplementary-r-objects"></a>
</h3>
<p>Here examples for the structure of supplementary R objects are
given:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... assuming infiltration parameters are not given in the .shp file, an R object (tibble or data.frame) called infiltration can be added. Additionally a column 'Soil' must be added to polygon shp file.</span></span>
<span></span>
<span><span class="va">infiltration</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  Soil <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, <span class="co"># or: unique(polygon$Soil)</span></span>
<span>  MaxRate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">76.2</span>, <span class="fl">127</span><span class="op">)</span>, </span>
<span>  MinRate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.81</span>, <span class="fl">7.62</span><span class="op">)</span>,</span>
<span>  Decay <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.069</span>, <span class="fl">0.069</span><span class="op">)</span>,</span>
<span>  DryTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>  MaxInf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span>  </span>
<span><span class="co"># ... assuming not all subcatchment related parameters are given in the polygon .shp-file, an R object (tibble or data.frame) called subcatchment_typologies can be added. Additionally a column 'Type' must be added to the polygon .shp file. </span></span>
<span></span>
<span><span class="va">subcatchment_typologies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  Type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Street"</span>, <span class="st">"Park"</span><span class="op">)</span>, <span class="co"># or: unique(polygon$Type)</span></span>
<span>  Perc_Imperv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  Width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>  Slope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.57</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  CurbLen <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  Snowpack <span class="op">=</span> <span class="st">' '</span>,</span>
<span>  Rain_Gage <span class="op">=</span> <span class="st">"Test_rain"</span>,</span>
<span>  N_Imperv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.025</span><span class="op">)</span>,</span>
<span>  N_Perv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  S_Imperv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">0.58</span><span class="op">)</span>,</span>
<span>  S_Perv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">0.58</span><span class="op">)</span>,</span>
<span>  Pct_Zero <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  PctRouted <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#...assuming roughness is not given in the line .shp file, an R object (tibble or data.frame) called conduit_material can be added. Additionally a column 'Material' must be added to the line .shp file</span></span>
<span><span class="va">conduit_material</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  Material <span class="op">=</span> <span class="st">"B"</span>, <span class="co"># or: unique(lines$Material)</span></span>
<span>  Roughness <span class="op">=</span> <span class="fl">0.018</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#... assuming surcharge of junctions should be added later:</span></span>
<span><span class="va">junction_parameters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  Y <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  Ysur <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  Apond <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The shp_to_inp function relies on the correct naming of the column
names given in the .shp files: either you use the original swmm encoding
(also given in swmmr::read_inp) or the swmm encoding abbreviated to
seven characters (which is coerced when storing shp files, e.g. with
sf::st_write).</p>
<p>In the moment, inp_to_files and shp_to_inp support the following SWMM
inp sections:</p>
<ul>
<li>options</li>
<li>raingages</li>
<li>subcatchments</li>
<li>subareas</li>
<li>infiltration</li>
<li>junctions</li>
<li>outfalls</li>
<li>storage</li>
<li>conduits</li>
<li>weirs</li>
<li>xsections</li>
<li>pollutants</li>
<li>landuses</li>
<li>coverages</li>
<li>buildup</li>
<li>washoff</li>
<li>curves</li>
<li>report</li>
<li>coordinates</li>
<li>polygons</li>
</ul>
<p>The following sections are implemented with restrictions:</p>
<ul>
<li>evaporation: only constant value</li>
<li>pumps: missing default values</li>
<li>timeseries: *.dat file only</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Dominik Leutnant, Anneke Doering.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
